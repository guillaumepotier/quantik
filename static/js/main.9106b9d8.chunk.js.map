{"version":3,"sources":["Piece.js","Player.js","tools.js","Cell.js","ia.js","Game.js","App.js","serviceWorker.js","index.js"],"names":["Piece","type","color","allowed","onPieceClick","className","onClick","Player","this","pieces","isPieceAllowed","board","x","y","piece","i","j","zone","getZone","hasWon","rows","cols","zones","needed","push","k","intersection","length","cloneBoard","slice","clonePlayer","player","newPlayer","doMove","splice","findIndex","p","removePlayerPiece","window","players","Cell","onCellClick","chosen","isChosen","evaluatedMoves","getAvailableSituations","isIA","situations","currentPlayer","uniq","situationPlayers","situationBoard","situationPlayer","playv2","state","depth","debug","bestSituation","best","debugBoard","situation","val","minmaxv2","Math","random","console","log","maxMinmaxv2","currentSituation","value","WEIGHT","minMinmaxv2","evaluate","finished","IA_DEPTH_MEDIUM","getDefaultState","turn","iaComputing","iaLog","needRestart","Game","args","withIA","iaLevel","setState","alert","setTimeout","IAPlay","start","Date","newState","end","cells","key","renderGrid","name","checked","onChange","htmlFor","id","event","parseInt","target","map","React","Component","App","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.9106b9d8.chunk.js","sourcesContent":["import React from 'react';\n\nimport './Piece.css';\n\nfunction Piece({ type, color, allowed, onPieceClick }) {\n  return (\n    <div className={`Piece Piece--${!allowed ? 'notAllowed' : 'allowed'} Piece--${color} Piece--${type}`} onClick={onPieceClick}>\n    </div>\n  );\n}\n\nexport default Piece;\n","class Player {\n  constructor (color) {\n    this.color = color;\n    this.pieces = [\n      'square', 'square',\n      'triangle', 'triangle',\n      'circle', 'circle',\n      'cross', 'cross'\n    ];\n  }\n}\n\nexport default Player;\n","import intersection from 'lodash/intersection';\n\nimport Player from './Player'\n\nexport const isPieceAllowed = (board, x, y, piece, color) => {\n  let i, j;\n\n  // check zone\n  const zone = getZone(x, y);\n\n  for (i = 0; i <= 3; i++) {\n    for (j = 0; j <= 3; j++) {\n      if (board[x][j] && board[x][j].piece === piece && board[x][j].color !== color)\n        return false;\n      if (board[i][y] && board[i][y].piece === piece && board[i][y].color !== color)\n        return false;\n      if (board[i][j] && getZone(i, j) === zone && board[i][j].piece === piece && board[i][j].color !== color)\n        return false;\n    }\n  }\n\n  return true;\n}\n\nexport const isPieceAllowedOld = (board, x, y, piece, color) => {\n  let i, j;\n\n  // check row\n  for (i = 0; i <= 3; i++)\n    if (board[i][y] && board[i][y].piece === piece && board[i][y].color !== color)\n      return false;\n\n  // check coll\n  for (j = 0; j <= 3; j++)\n    if (board[x][j] && board[x][j].piece === piece && board[x][j].color !== color)\n      return false;\n\n  // check zone\n  const zone = getZone(x, y);\n\n  for (i = 0; i <= 3; i++)\n    for (j = 0; j <= 3; j++)\n      if (board[i][j] && getZone(i, j) === zone && board[i][j].piece === piece && board[i][j].color !== color)\n        return false;\n\n  return true;\n}\n\nexport const getZone = (x, y) => {\n  if (x <= 1) {\n    if (y <= 1)\n      return 0;\n    else\n      return 2;\n  } else {\n    if (y <= 1)\n      return 1;\n    else\n      return 3;\n  }\n}\n\nexport const hasWon = board => {\n  let i, j;\n  const rows = [[], [], [], []];\n  const cols = [[], [], [], []];\n  const zones = [[], [], [], []];\n  const needed = ['square', 'triangle', 'circle', 'cross'];\n\n  for (i = 0; i <= 3; i++) {\n    for (j = 0; j <= 3; j++) {\n      const piece = board[i][j].piece;\n      rows[i].push(piece);\n      cols[j].push(piece);\n      zones[getZone(i, j)].push(piece);\n    }\n  }\n\n  for (let k = 0; k <= 3; k++) {\n    if (intersection(rows[k], needed).length === 4)\n      return true;\n    if (intersection(cols[k], needed).length === 4)\n      return true;\n    if (intersection(zones[k], needed).length === 4)\n      return true;\n  }\n\n  return false;\n}\n\nexport const hasWonOld = board => {\n  let i, j;\n  const needed = ['square', 'triangle', 'circle', 'cross'];\n\n  // test rows\n  for (j = 0; j <= 3; j++) {\n    let row = [];\n\n    for (i = 0; i <= 3; i++)\n      row.push(board[i][j].piece);\n\n    if (intersection(row, needed).length === 4)\n      return true;\n  }\n\n  // test cols\n  for (i = 0; i <= 3; i++) {\n    let col = [];\n\n    for (j = 0; j <= 3; j++)\n      col.push(board[i][j].piece);\n\n    if (intersection(col, needed).length === 4)\n      return true;\n  }\n\n  // test zones\n  for (let z = 1; z <= 4; z++) {\n    let zone = [];\n\n    for (i = 0; i <= 3; i++)\n      for (j = 0; j <= 3; j++)\n        if (getZone(i, j) === z)\n          zone.push(board[i][j].piece);\n\n    if (intersection(zone, needed).length === 4)\n      return true;\n  }\n\n  return false;\n}\n\nexport const cloneBoard = board => {\n  return [\n    board[0].slice(),\n    board[1].slice(),\n    board[2].slice(),\n    board[3].slice()\n  ];\n}\n\nexport const clonePlayer = player => {\n  const newPlayer = new Player(player.color);\n  newPlayer.pieces = player.pieces.slice();\n\n  return newPlayer;\n}\n\nexport const removePlayerPieceOld = (player, piece) => {\n  let index;\n\n  for (let i = 0; i < player.pieces.length; i++) {\n    if (player.pieces[i] === piece) {\n      index = i;\n      break;\n    }\n  }\n\n  player.pieces.splice(index, 1);\n}\n\nexport const removePlayerPiece = (player, piece) => {\n  player.pieces.splice(player.pieces.findIndex(p => p === piece), 1);\n}\n\nexport const doMove = (board, player, piece, x, y) => {\n  board[x][y] = { piece, color: player.color };\n  removePlayerPiece(player, piece);\n}\n\nwindow.doMove = doMove;\nwindow.players = [\n  new Player('white'),\n  new Player('black')\n];\n","import React from 'react';\n\nimport Piece from './Piece'\n\nimport { getZone } from './tools'\n\nimport './Cell.css';\n\nfunction Cell({x, y, board, onCellClick, chosen }) {\n  const isChosen = x === chosen.x && y === chosen.y;\n\n  return (\n    <div className={`Cell CellX--${x} CellY--${y} CellZone--${getZone(x, y)} Cell--${isChosen ? 'chosen' : 'notChosen'}`} onClick={onCellClick}>\n      {board && board[x][y] &&\n        <Piece type={board[x][y].piece} color={board[x][y].color} />\n      }\n    </div>\n  );\n}\n\nexport default Cell;\n","import uniq from 'lodash/uniq';\n\nimport {\n  cloneBoard,\n  clonePlayer,\n  hasWon,\n  doMove,\n  isPieceAllowed\n} from './tools'\n\nexport const WEIGHT = 1000;\nexport const MALUS = 69;\n\nexport const DEBUG = true;\nwindow.evaluatedMoves = 0;\n\nexport const getAvailableSituations = (board, players, isIA) => {\n  const situations = [];\n  const currentPlayer = players[isIA ? 1 : 0];\n  const pieces = uniq(currentPlayer.pieces);\n\n  for (let i = 0; i <= 3; i++) {\n    for (let j = 0; j <= 3; j++) {\n      // if already a piece on this case, not playable\n      if (board[i][j])\n        continue;\n\n      for (let p = 0; p < pieces.length; p++) {\n        const piece = pieces[p];\n\n        if (!isPieceAllowed(board, i, j, piece, currentPlayer.color))\n          continue;\n\n        const situationPlayers = [\n          clonePlayer(players[0]),\n          clonePlayer(players[1])\n        ];\n\n        // clone situation.board and situation.player to modify them\n        const situationBoard = cloneBoard(board);\n        const situationPlayer = situationPlayers[isIA ? 1 : 0];\n\n        doMove(situationBoard, situationPlayer, piece, i, j);\n\n        situations.push({\n          board: situationBoard,\n          players: situationPlayers,\n          x: i,\n          y: j,\n          piece,\n          color: situationPlayer.color\n        });\n      }\n    }\n  }\n\n  return situations;\n}\n\nexport const playv2 = (state, depth, debug) => {\n  let best = false;\n  let bestSituation;\n  const situations = getAvailableSituations(state.board, state.players, true);\n\n  if (DEBUG) {\n    var debugBoard = [\n      [{}, {}, {}, {}],\n      [{}, {}, {}, {}],\n      [{}, {}, {}, {}],\n      [{}, {}, {}, {}]\n    ];\n  }\n\n  // first move is not important, do not make many iterations\n  if (state.players[1].pieces.length === 8)\n    depth = 0;\n  // for second move, reduce depth a bit to avoid wait\n  if (state.players[1].pieces.length === 7 && depth > 0)\n    depth = depth - 1;\n\n  for (let i = 0; i < situations.length; i++) {\n    const situation = situations[i];\n    const val = minmaxv2(situation.board, depth, situation.players, true);\n\n    if (DEBUG)\n      debugBoard[situation.x][situation.y][situation.piece] = val;\n\n    if (best === false || val > best || (val === best && Math.random() < 0.1)) {\n      best = val;\n      bestSituation = situation;\n    }\n  }\n\n  doMove(state.board, state.players[1], bestSituation.piece, bestSituation.x, bestSituation.y);\n\n  if (debug) {\n    console.log('playv2 best situation', bestSituation.x, bestSituation.y, bestSituation.piece, best);\n    return debugBoard;\n  }\n\n  return state;\n}\n\nexport const play = (state, depth) => {\n  let bestScore = 0;\n  let bestPiece = false;\n  let bestCoordinates = false;\n\n  let players = Object.assign({}, state.players);\n  let currentPlayer = clonePlayer(players[1]);  // IA is black for now on\n  let pieces = uniq(currentPlayer.pieces);\n\n  for (var i = 0; i <= 3; i++) {\n    for (var j = 0; j <= 3; j++) {\n      let board = cloneBoard(state.board);\n\n      // if already a piece on this case, not playable\n      if (board[i][j])\n        continue;\n\n      // loop for each remaining pieces and try to evaluate the play\n      for (var p = 0; p < pieces.length; p++) {\n        const piece = pieces[p];\n        currentPlayer = clonePlayer(players[1]);\n\n        if (!isPieceAllowed(board, i, j, piece, currentPlayer.color))\n          continue;\n\n        doMove(board, currentPlayer, piece, i, j);\n        const val = minmax(board, depth, players, currentPlayer, true);\n\n        // console.log(`${pieces[p]}:${i},${j}`, val);\n\n        if (val > bestScore || (val === bestScore && Math.random() < 0.1)) {\n          bestScore = val;\n          bestPiece = piece;\n          bestCoordinates = { x: i, y: j };\n        }\n      }\n    }\n  }\n\n  // console.log('bestScore', bestScore)\n\n  doMove(state.board, state.players[1], bestPiece, bestCoordinates.x, bestCoordinates.y);\n\n  return state;\n}\n\nexport const maxMinmaxv2 = (situations, depth) => {\n  let best = false;\n  let bestSituation;\n\n  for (let i = 0; i < situations.length; i++) {\n    const currentSituation = situations[i];\n    const value = minmaxv2(currentSituation.board, depth, currentSituation.players, true);\n\n    if (best === false || value > best || (value === best && Math.random() < 0.1)) {\n      best = value;\n      bestSituation = currentSituation;\n    }\n\n    if (best >= WEIGHT - 8)\n      break;\n  }\n\n  return { best, bestSituation };\n}\n\nexport const minMinmaxv2 = (situations, depth) => {\n  let best = false;\n  let bestSituation;\n\n  for (let i = 0; i < situations.length; i++) {\n    const currentSituation = situations[i];\n    const value = minmaxv2(currentSituation.board, depth, currentSituation.players, false);\n\n    if (best === false || value < best || (value === best && Math.random() < 0.1)) {\n      best = value;\n      bestSituation = currentSituation;\n    }\n\n    if (best <= - WEIGHT + 8)\n      break;\n  }\n\n  return { best, bestSituation };\n}\n\nexport const minmaxv2 = (board, depth, players, isIA) => {\n  if (depth === 0 || hasWon(board))\n    return evaluate(board, players, isIA);\n\n  // get next player situations\n  // ie: if we're currently evaluating an ia move, consider player next situations\n  const situations = getAvailableSituations(board, players, !isIA);\n\n  // const { best, bestSituation } = maxMinmaxv2(situations, depth - 1, players, !isIA);\n  // return best;\n\n  if (isIA) {\n    const { best, bestSituation } = minMinmaxv2(situations, depth - 1);\n    // console.log('>>>> isIA best', best, bestSituation)\n    return best;\n  } else {\n    const { best, bestSituation } = maxMinmaxv2(situations, depth - 1);\n    // console.log('isPlayer best', best, bestSituation)\n    return best;\n  }\n}\n\nexport const minmax = (board, depth, players, playerIA, isIA) => {\n  if (depth === 0 || hasWon(board))\n    return evaluate(board, players, isIA);\n}\n\n// todo: won't work, need to fake play turn to have proper player.pieces count\nexport const evaluate = (board, players, isIA) => {\n  const finished = hasWon(board);\n  const player = players[isIA ? 1 : 0];\n  window.evaluatedMoves++;\n\n  if (!finished) {\n    return 100;\n  }\n\n  if (isIA) {\n    return WEIGHT - players[1].pieces.length;\n  }\n\n  return -WEIGHT + players[0].pieces.length;\n}\n\nwindow.board = [\n  [false, false, false, { piece: 'square', color: 'white' }],\n  [false, false, false, false],\n  [{ piece: 'triangle', color: 'white' }, { piece: 'circle', color: 'black' }, false, false],\n  [false, false, false, false]\n];\nwindow.evaluate = evaluate;\nwindow.playv2 = playv2;\nwindow.getAvailableSituations = getAvailableSituations;\nwindow.minmaxv2 = minmaxv2;\nwindow.maxMinmaxv2 = maxMinmaxv2;\nwindow.minMinmaxv2 = minMinmaxv2;\n","import React from 'react';\n\nimport uniq from 'lodash/uniq'\n\nimport Cell from './Cell';\nimport Piece from './Piece';\n\nimport Player from './Player';\n\nimport {\n  hasWon,\n  doMove,\n  isPieceAllowed\n} from './tools';\n\nimport {\n  playv2\n} from './ia'\n\nimport './Game.css';\n\nconst IA_DEPTH_HARD = 6;\nconst IA_DEPTH_MEDIUM = 5;\nconst IA_DEPTH_EASY = 3;\n\nexport const getDefaultState = () => ({\n  board: [\n    [false,false,false,false],\n    [false,false,false,false],\n    [false,false,false,false],\n    [false,false,false,false]\n  ],\n  players: [\n    new Player('white'),\n    new Player('black')\n  ],\n  turn: 0,\n  chosen: false,\n  iaComputing: false,\n  iaLog: false,\n  needRestart: false\n});\n\nclass Game extends React.Component {\n  constructor (args) {\n    super(args);\n\n    this.state = {\n      ...getDefaultState(),\n      withIA: true,\n      iaLevel: IA_DEPTH_MEDIUM\n    }\n  }\n\n  onCellClick (x, y) {\n    if (this.state.board[x][y] || this.state.needRestart)\n      return;\n\n    this.setState({ chosen: {x, y} });\n  }\n\n  onPieceClick (piece, i) {\n    let { chosen, turn, players, board } = this.state;\n    const { x, y } = chosen;\n    let currentPlayer = players[turn%2];\n\n    doMove(board, currentPlayer, piece, x, y);\n\n    if (hasWon(board)) {\n      alert(`Congrats player ${currentPlayer.color}!`);\n      // this.setState(getDefaultState());\n      this.setState({ needRestart: true, chosen: false });\n      return;\n    }\n\n    this.setState({\n      board,\n      turn: turn + 1,\n      chosen: false\n    }, () => {\n      if (this.state.withIA) {\n        this.setState({ iaComputing: true });\n        setTimeout(() => this.IAPlay(), 300);\n      }\n    });\n  }\n\n  IAPlay () {\n    // todo: make a IA class with this private var\n    window.evaluatedMoves = 0;\n\n    const start = new Date();\n    const newState = playv2(this.state, this.state.iaLevel);\n    const end = new Date();\n\n    console.log(`IA took ${end-start}ms to play`);\n\n    this.setState({\n      ...newState,\n      iaLog: `IA evaluated ${window.evaluatedMoves} possible moves in ${end-start}ms.`,\n      turn: this.state.turn + 1,\n      iaComputing: false\n    }, () => {\n      if (hasWon(this.state.board)) {\n        alert(`Congrats IA!`);\n        this.setState({ needRestart: true, chosen: false });\n      }\n    });\n  }\n\n  renderGrid (board) {\n    const cells = [];\n\n    for (let i = 0; i <= 3; i++)\n      for (let j = 0; j <= 3; j++)\n        cells.push(<Cell chosen={this.state.chosen} key={`${i}:${j}`} x={i} y={j} board={board} onCellClick={() => this.onCellClick(i, j)} />)\n\n    return cells;\n  }\n\n  render () {\n    const { board, players, turn, chosen } = this.state;\n    const { x, y } = chosen;\n    const currentPlayer = players[turn%2];\n\n    return (\n      <div className=\"Game\">\n\n\n        <div className=\"Board\">\n\n        {this.renderGrid(board)}\n\n        </div>\n\n        <div className=\"Controls\">\n          <div className=\"HumanOrIa\">\n            Player vs. Player<input type=\"radio\" name=\"player2\" value=\"IA\" checked={!this.state.withIA} onChange={() => this.setState({ withIA: false })} />\n            Player vs. IA<input type=\"radio\" name=\"player2\" value=\"human\" checked={this.state.withIA} onChange={() => this.setState({ withIA: true })} />\n          </div>\n          {this.state.withIA &&\n            <div className=\"IALevel\">\n              <label htmlFor=\"ia_level\">IA Difficulty</label>\n              <select id=\"ia_level\" name=\"ia_level\" value={this.state.iaLevel} onChange={event => this.setState({ iaLevel: parseInt(event.target.value, 10) }) }>\n                <option value={IA_DEPTH_EASY}>Easy</option>\n                <option value={IA_DEPTH_MEDIUM}>Medium</option>\n                <option value={IA_DEPTH_HARD}>Hard</option>\n              </select>\n            </div>\n          }\n\n          {!this.state.needRestart &&\n            <div>Player {currentPlayer.color} turn</div>\n          }\n\n          {this.state.needRestart &&\n            <button onClick={() => {\n              this.setState(getDefaultState());\n            }}>New game!</button>\n          }\n\n          <div>--</div>\n\n          {this.state.iaComputing &&\n            <div>IA is computing..</div>\n          }\n          {this.state.iaLog && !this.state.iaComputing &&\n            <div>{this.state.iaLog}</div>\n          }\n\n          <div className=\"Choice\">\n            {chosen &&\n              <div>\n                <div>Choose</div>\n                <div onClick={() => this.setState({ chosen: false })}>X</div>\n                <div>\n                  {uniq(currentPlayer.pieces).map((piece, i) => {\n                    if (!isPieceAllowed(board, x, y, piece, currentPlayer.color))\n                      return false;\n                    return <Piece key={i} color={currentPlayer.color} type={piece} allowed={true} onPieceClick={() => this.onPieceClick(piece, i) } />\n                  })}\n                </div>\n              </div>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Game;\n","import React from 'react';\nimport './App.css';\n\nimport Game from './Game'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Game />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}