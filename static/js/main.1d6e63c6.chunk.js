(this.webpackJsonpquantik=this.webpackJsonpquantik||[]).push([[0],{26:function(e,t,a){e.exports=a(92)},31:function(e,t,a){},32:function(e,t,a){},74:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),o=a.n(i),c=(a(31),a(32),a(9)),l=a(8),s=a(22),u=a(24),h=a(23),v=a(25),p=a(2),f=a.n(p);a(74);var d=function(e){var t=e.type,a=e.color,n=e.allowed,i=e.onPieceClick;return r.a.createElement("div",{className:"Piece Piece--".concat(n?"allowed":"notAllowed"," Piece--").concat(a," Piece--").concat(t),onClick:i})},m=a(1),w=a.n(m),y=function e(t){Object(l.a)(this,e),this.color=t,this.pieces=["square","square","triangle","triangle","circle","circle","cross","cross"],this.lastPlay=!1},g=function(e,t,a,n,r){var i,o,c=b(t,a);for(i=0;i<=3;i++)for(o=0;o<=3;o++){if(e[t][o]&&e[t][o].piece===n&&e[t][o].color!==r)return!1;if(e[i][a]&&e[i][a].piece===n&&e[i][a].color!==r)return!1;if(e[i][o]&&b(i,o)===c&&e[i][o].piece===n&&e[i][o].color!==r)return!1}return!0},b=function(e,t){return e<=1?t<=1?0:2:t<=1?1:3},C=function(e,t){var a,n,r=[[],[],[],[]],i=[[],[],[],[]],o=[[],[],[],[]],c=["square","triangle","circle","cross"];for(a=0;a<=3;a++)for(n=0;n<=3;n++){var l=e[a][n].piece;e[a][n]&&(r[a].push(l),i[n].push(l),o[b(a,n)].push(l))}for(var s=0;s<=3;s++)if(4===r[s].length||4===i[s].length||4===o[s].length){if(4===w()(r[s],c).length)return!t||{what:"row",where:s};if(4===w()(i[s],c).length)return!t||{what:"col",where:s};if(4===w()(o[s],c).length)return!t||{what:"zone",where:s}}return!1},k=function(e){var t=new y(e.color);return t.pieces=e.pieces.slice(),t},E=function(e,t,a,n,r){e[n][r]={piece:a,color:t.color},function(e,t){e.pieces.splice(e.pieces.findIndex((function(e){return e===t})),1)}(t,a),t.lastPlay={piece:a,x:n,y:r}},x=function(e,t,a,n,r){e[n][r]=!1,t.pieces.push(a),t.lastPlay=!1},A=function(e){if(e<=1e3)return e;if(e<=1e6)return"".concat(Math.floor(e/1e3),"k+");var t=Math.floor(e/1e6),a=Math.floor((e-1e6*t)/1e5);return"".concat(t,",").concat(a,"M+")},I=function(e){if(e<=1e3)return"".concat(e,"ms");var t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)/100);return"".concat(t,",").concat(a,"s")};window.doMove=E,window.players=[new y("white"),new y("black")];a(90);var P=function(e){var t=e.x,a=e.y,n=e.board,i=e.onCellClick,o=e.chosen,c=e.won,l=t===o.x&&a===o.y,s=b(t,a),u=!1;return c&&("row"===c.what&&c.where===t||"col"===c.what&&c.where===a||"zone"===c.what&&c.where===s)&&(u=!0),r.a.createElement("div",{className:"Cell CellX--".concat(t," CellY--").concat(a," CellZone--").concat(s," Cell--").concat(l?"chosen":"notChosen"," Cell--").concat(u?"winning":"notWinning"),onClick:i},n&&n[t][a]&&r.a.createElement(d,{type:n[t][a].piece,color:n[t][a].color}))};window.evaluatedMoves=0;var M=function(e,t,a,n){for(var r=[],i=t[a?1:0],o=f()(i.pieces),c=0;c<=3;c++)for(var l=0;l<=3;l++)if(!e[c][l]&&(!n||1!==c&&2!==c&&1!==l&&2!==l))for(var s=0;s<o.length;s++){var u=o[s];g(e,c,l,u,i.color)&&r.push({x:c,y:l,piece:u})}return r},S=function(e,t,a){var n=!1,r=!1,i=M(e.board,e.players,!0),o=[k(e.players[0]),k(e.players[1])];if(a)var c=[[{},{},{},{}],[{},{},{},{}],[{},{},{},{}],[{},{},{},{}]];8===e.players[1].pieces.length&&(t=0),7===e.players[1].pieces.length&&(t=Math.max(0,t-1),i=M(e.board,e.players,!0,!0));for(var l=0;l<i.length;l++){var s=i[l];E(e.board,o[1],s.piece,s.x,s.y);var u=O(e.board,t,o,!0);x(e.board,o[1],s.piece,s.x,s.y),a&&(c[s.x][s.y][s.piece]=u),(!1===n||u>n||u===n&&Math.random()<.1)&&(n=u,r=s)}return!1!==r&&(E(e.board,e.players[1],r.piece,r.x,r.y),a?(console.log("playv2 best situation",r.x,r.y,r.piece,n),c):e)},N=function(e,t,a,n){for(var r,i=!1,o=0;o<e.length;o++){var c=e[o];E(a,n[1],c.piece,c.x,c.y);var l=O(a,t,n,!0);if(x(a,n[1],c.piece,c.x,c.y),(!1===i||l>i||l===i&&Math.random()<.1)&&(i=l,r=c),i>=992)break}return{best:i,bestSituation:r}},F=function(e,t,a,n){for(var r,i=!1,o=0;o<e.length;o++){var c=e[o];E(a,n[0],c.piece,c.x,c.y);var l=O(a,t,n,!1);if(x(a,n[0],c.piece,c.x,c.y),(!1===i||l<i||l===i&&Math.random()<.1)&&(i=l,r=c),i<=-992)break}return{best:i,bestSituation:r}},O=function(e,t,a,n){if(0===t||C(e))return j(e,a,n);var r=M(e,a,!n);if(n){var i=F(r,t-1,e,a),o=i.best;i.bestSituation;return o}var c=N(r,t-1,e,a),l=c.best;c.bestSituation;return l},j=function(e,t,a){var n=C(e);return window.evaluatedMoves++,n?a?1e3-t[1].pieces.length:-1e3+t[0].pieces.length:100};window.board=[[!1,!1,!1,{piece:"square",color:"white"}],[!1,!1,!1,!1],[{piece:"triangle",color:"white"},{piece:"circle",color:"black"},!1,!1],[!1,!1,!1,!1]],window.evaluate=j,window.playv2=S,window.getAvailableSituations=M,window.minmaxv2=O,window.maxMinmaxv2=N,window.minMinmaxv2=F;a(91);var L=5,R=function(){return{board:[[!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!1,!1]],players:[new y("white"),new y("black")],turn:0,chosen:!1,iaComputing:!1,iaLog:!1,needRestart:!1,won:!1}},q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state=Object(c.a)({},R(),{withIA:!0,iaFirst:!1,iaLevel:L}),a}return Object(v.a)(t,e),Object(s.a)(t,[{key:"onCellClick",value:function(e,t){this.state.board[e][t]||this.state.needRestart||this.setState({chosen:{x:e,y:t}})}},{key:"onPieceClick",value:function(e,t){var a=this,n=this.state,r=n.chosen,i=n.turn,o=n.players,c=n.board,l=r.x,s=r.y,u=o[i%2];E(c,u,e,l,s);var h=C(c,!0);if(!1!==h)return alert("Congrats player ".concat(u.color,"!")),void this.setState({needRestart:!0,chosen:!1,won:h});this.setState({board:c,players:o,turn:i+1,chosen:!1},(function(){a.state.withIA&&(a.setState({iaComputing:!0}),setTimeout((function(){return a.IAPlay()}),300))}))}},{key:"onIAFirstChange",value:function(){var e=!this.state.iaFirst;this.setState({iaFirst:e}),e&&0===this.state.turn&&this.iaFirst()}},{key:"iaFirst",value:function(){this.IAPlay(),this.setState({turn:0})}},{key:"IAPlay",value:function(){var e=this;window.evaluatedMoves=0;var t=new Date,a=S(this.state,this.state.iaLevel),n=new Date;if(console.log("IA took ".concat(n-t,"ms to play")),!1===a)return alert("Congrats white! IA has no move left to play, you won!"),void this.setState({needRestart:!0,chosen:!1});this.setState(Object(c.a)({},a,{iaLog:"IA evaluated ".concat(A(window.evaluatedMoves)," possible moves in ").concat(I(n-t),"."),turn:this.state.turn+1,iaComputing:!1}),(function(){var t=C(e.state.board,!0);!1!==t&&(alert("Congrats IA!"),e.setState({needRestart:!0,chosen:!1,won:t}))}))}},{key:"undoMove",value:function(){var e=this.state,t=e.board,a=e.players,n=e.turn;x(t,a[1],a[1].lastPlay.piece,a[1].lastPlay.x,a[1].lastPlay.y),x(t,a[0],a[0].lastPlay.piece,a[0].lastPlay.x,a[0].lastPlay.y),this.setState({board:t,players:a,turn:n-2})}},{key:"renderGrid",value:function(e){for(var t=this,a=[],n=this.state,i=n.chosen,o=n.won,c=function(n){for(var c=function(c){a.push(r.a.createElement(P,{chosen:i,won:o,key:"".concat(n,":").concat(c),x:n,y:c,board:e,onCellClick:function(){return t.onCellClick(n,c)}}))},l=0;l<=3;l++)c(l)},l=0;l<=3;l++)c(l);return a}},{key:"render",value:function(){var e=this,t=this.state,a=t.board,n=t.players,i=t.turn,o=t.chosen,l=o.x,s=o.y,u=n[i%2],h=o?f()(u.pieces).filter((function(e){return g(a,l,s,e,u.color)})):[];return r.a.createElement("div",{className:"Game"},r.a.createElement("div",{className:"Parameters"},r.a.createElement("div",{className:"HumanOrIa"},r.a.createElement("span",null,"Player vs."),r.a.createElement("span",null,"Player",r.a.createElement("input",{type:"radio",name:"player2",value:"IA",checked:!this.state.withIA,onChange:function(){return e.setState({withIA:!1})}}),"IA",r.a.createElement("input",{type:"radio",name:"player2",value:"human",checked:this.state.withIA,onChange:function(){return e.setState({withIA:!0})}}))),this.state.withIA&&r.a.createElement("div",{className:"IALevel"},r.a.createElement("label",{htmlFor:"ia_level"},"IA Difficulty"),r.a.createElement("select",{id:"ia_level",name:"ia_level",value:this.state.iaLevel,onChange:function(t){return e.setState({iaLevel:parseInt(t.target.value,10)})}},r.a.createElement("option",{value:3},"Easy"),r.a.createElement("option",{value:L},"Medium"),r.a.createElement("option",{value:6},"Hard")),"IA plays first ",r.a.createElement("input",{type:"checkbox",defaultChecked:this.state.iaFirst,onChange:function(){return e.onIAFirstChange()}})),!this.state.needRestart&&r.a.createElement("div",null,r.a.createElement("span",null,"Player ",u.color," turn"),n[0].lastPlay&&n[1].lastPlay&&r.a.createElement("button",{onClick:function(){return e.undoMove()}},"Undo previous")),this.state.needRestart&&r.a.createElement("button",{onClick:function(){e.setState(Object(c.a)({},e.state,{},R())),e.state.iaFirst&&setTimeout((function(){return e.iaFirst()}),300)}},"New game!")),r.a.createElement("div",{className:"Board"},this.renderGrid(a)),r.a.createElement("div",{className:"Controls"},this.state.iaComputing&&r.a.createElement("div",null,"IA is computing.."),this.state.iaLog&&!this.state.iaComputing&&r.a.createElement("div",null,this.state.iaLog),r.a.createElement("div",{className:"Choice"},o&&r.a.createElement("div",null,r.a.createElement("div",{className:"Choice-title"},"Allowed pieces"),r.a.createElement("div",{className:"Close",onClick:function(){return e.setState({chosen:!1})}},"X"),r.a.createElement("div",{className:"Choice-pieces"},!h.length&&r.a.createElement("span",null,"None! \ud83d\ude30"),h.map((function(t,n){return!!g(a,l,s,t,u.color)&&r.a.createElement(d,{key:n,color:u.color,type:t,allowed:!0,onPieceClick:function(){return e.onPieceClick(t,n)}})})))))))}}]),t}(r.a.Component);var B=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.1d6e63c6.chunk.js.map